<?xml version="1.0"?>

<fragment>

	<extension target="application#MODULE">

		<module>
			<ejb>${bundle.fileName}</ejb>
		</module>

	</extension>

	<install>
		<!--  create a temp dir -->
		<!--  be sure no directory with that name exists -->
		<delete path="nxaudit-web-access.tmp" />
		<mkdir path="nxaudit-web-access.tmp" />

		<unzip from="${bundle.fileName}" to="nxaudit-web-access.tmp">
			<include>OSGI-INF/l10n/**</include>
		</unzip>

		<append
			from="nxaudit-web-access.tmp/OSGI-INF/l10n/messages.properties"
			to="nuxeo.war/WEB-INF/classes/messages.properties" addNewLine="true" />
		<append
			from="nxaudit-web-access.tmp/OSGI-INF/l10n/messages_en.properties"
			to="nuxeo.war/WEB-INF/classes/messages_en.properties"
			addNewLine="true" />
		<append
			from="nxaudit-web-access.tmp/OSGI-INF/l10n/messages_fr.properties"
			to="nuxeo.war/WEB-INF/classes/messages_fr.properties"
			addNewLine="true" />
		<append
			from="nxaudit-web-access.tmp/OSGI-INF/l10n/messages_de.properties"
			to="nuxeo.war/WEB-INF/classes/messages_de.properties"
			addNewLine="true" />

		<delete path="nxaudit-web-access.tmp" />
	</install>

</fragment>

